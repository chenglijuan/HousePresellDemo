package zhishusz.housepresell.service;import zhishusz.housepresell.controller.form.Empj_BldLimitAmount_AFForm;import zhishusz.housepresell.database.po.state.S_NormalFlag;import zhishusz.housepresell.util.MyBackInfo;import zhishusz.housepresell.util.MyProperties;import org.springframework.stereotype.Service;import java.util.Properties;import javax.transaction.Transactional;/* * Service添加操作：银行网点(开户行) * Company：ZhiShuSZ * */@Service@Transactionalpublic class Empj_BldLimitAmountCalculateService{		public Properties execute(Empj_BldLimitAmount_AFForm model)	{		Properties properties = new MyProperties();		Double orgLimitedAmount = model.getOrgLimitedAmount();		Double expectLimitedRatio = model.getExpectLimitedRatio();		Double cashLimitedAmount = model.getCashLimitedAmount();		if (expectLimitedRatio == null)		{			return MyBackInfo.fail(properties, "拟变更受限比例不能为空");		}		if (orgLimitedAmount == null)		{			return MyBackInfo.fail(properties, "初始受限额度不能为空");		}		if (cashLimitedAmount == null)		{			return MyBackInfo.fail(properties, "现金受限额度不能为空");		}		Double expectLimitedAmount = orgLimitedAmount * expectLimitedRatio / 100.0;		Double expectEffectLimitedAmount = null;		if (expectLimitedAmount < cashLimitedAmount)		{			expectEffectLimitedAmount = expectLimitedAmount;		}		else		{			expectEffectLimitedAmount = cashLimitedAmount;		}		properties.put(S_NormalFlag.result, S_NormalFlag.success);		properties.put(S_NormalFlag.info, S_NormalFlag.info_Success);		properties.put("expectLimitedAmount", expectLimitedAmount);		properties.put("expectEffectLimitedAmount", expectEffectLimitedAmount);		return properties;	}}